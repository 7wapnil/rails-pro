= card header: t(:customer_documents), class: 'customer-documents' do
  = form_tag upload_documents_customer_path, multipart: true do
    %table.table
      - VerificationDocument::KINDS.keys.each do |kind|
        - attachment = attachment_for(@customer, kind)
        %tr.row
          %td.col.d-flex.align-items-center= t("attributes.#{kind}" )
          %td.col.d-flex.align-items-center
            %span.d-inline-block.text-truncate= attachment.filename
          %td.col.d-flex.align-items-center.justify-content-end= attachment.status
          %td.col-md-12.col-lg-4.d-flex.align-items-center.justify-content-end
            = label_tag kind, class: 'btn btn-secondary mt-2 mr-2' do
              = t(:choose_file)
              = file_field_tag kind, accept: 'image/jpeg, image/png, image/gif, application/pdf',
                                     hidden: 'hidden'
            - if attachment.is_a? VerificationDocument
              .dropdown
                %button#dropdownMenuButton.btn.btn-outline-dark.mr-2.dropdown-toggle{ aria: { expanded: false, haspopup: true },
                                                                                 'data-toggle' => 'dropdown',
                                                                                 type: :button }
                  = t(:action)
                .dropdown-menu{ 'aria-labelledby' => 'dropdownMenuButton' }
                  = link_to t(:view),
                            rails_blob_path(attachment.document),
                            class: 'dropdown-item',
                            target: :blank
                  = link_to t(:confirm),
                            update_document_status_customer_path(status: :confirmed,
                                                                 document_type: kind),
                                                                 class: 'dropdown-item'
                  = link_to t(:reject),
                            update_document_status_customer_path(status: :rejected,
                                                                 document_type: kind),
                                                                 class: 'dropdown-item'
                  = link_to t(:history),
                            documents_history_customer_path(id: @customer.id,
                                                            document_type: kind),
                                                            class: 'dropdown-item'
            - elsif @customer.documents_history(kind).any?
              = link_to t(:history),
                        documents_history_customer_path(id: @customer.id,
                                                        document_type: kind),
                                                        class: 'btn btn-outline-dark mr-2'
    .row
      .col.text-right
        = submit_tag t(:upload), class: 'btn btn-secondary mr-2'
