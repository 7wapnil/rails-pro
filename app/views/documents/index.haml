%h1.display-4= t('navigation.documents')

= render 'search', search: @search

%ul.nav.nav-tabs#documents_tabs
  %li.nav-item
    = link_to t('navigation.document.pending'), verification_documents_path(tab: :pending),
     class: 'nav-link',
     data: { 'target-controller': params[:tab].blank? || params[:tab] == 'pending' ? 'documents' : nil }
  %li.nav-item
    = link_to t('navigation.document.recently_actioned'), verification_documents_path(tab: :actioned),
     class: 'nav-link',
     data: { 'target-controller': params[:tab] == 'actioned' ? 'documents' : nil }
%table.table.entities
  %thead
    %tr
      %th= sort_link @search, :customer_username, t('attributes.username')
      %th= t('attributes.kind')
      %th= sort_link @search, :created_at, t('attributes.created_at')
      %th= t('attributes.status')
      %th= t(:view)
      %th.text-center= t('actions')
      %th= t(:details)
  %tbody
    - @documents.each do |document|
      %tr{id:"document-#{document.id}"}
        %td= link_to document.customer.username, documents_customer_path(id: document.customer.id)
        %td= t("attributes.#{document.kind}")
        %td= l(document.created_at, format: :short)
        %td= status_badge(document.status)
        %td= link_to t(:view), rails_blob_path(document.document), class: 'btn btn-outline-dark mr-2', target: :blank
        %td.text-center
          - if document.pending?
            = render partial: 'documents/actions', locals: { document: document }
        %td= link_to t('details'), verification_document_path(document), class: 'btn btn-outline-dark mr-2'
